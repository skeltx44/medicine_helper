# 🚀 약을 먹자 앱 실행 가이드

## 📋 실행 순서

### 1단계: 백엔드 서버 실행 (필수!)

**터미널 1 (PowerShell 또는 CMD)을 열고:**

```bash
# 프로젝트 폴더로 이동
cd C:\Users\ADMIN\Desktop\sibal

# backend 폴더로 이동
cd backend

# 가상환경 생성 (처음 한 번만)
python -m venv venv

# 가상환경 활성화
venv\Scripts\activate

# 필요한 패키지 설치 (처음 한 번만)
pip install -r requirements.txt

# 백엔드 서버 실행
python app.py
```

**성공하면 다음과 같은 메시지가 보입니다:**
```
백엔드 서버 시작...
주의: OPENAI_API_KEY 환경변수를 설정해주세요!
 * Running on http://0.0.0.0:5001
```

**이 터미널은 계속 열어두세요!** (서버가 실행 중이어야 합니다)

---

### 2단계: 프론트엔드 실행

**새 터미널 2 (PowerShell 또는 CMD)를 열고:**

```bash
# 프로젝트 폴더로 이동
cd C:\Users\ADMIN\Desktop\sibal

# 웹 서버 실행
python -m http.server 8080
```

**성공하면:**
```
Serving HTTP on 0.0.0.0 port 8080 (http://0.0.0.0:8080/) ...
```

---

### 3단계: 브라우저에서 접속

**브라우저를 열고:**
```
http://localhost:8080
```

또는

```
http://127.0.0.1:8080
```

---

## ✅ 실행 확인

### 백엔드 서버 확인
브라우저에서 다음 주소로 접속:
```
http://localhost:5001/api/health
```
**참고:** 포트 5000이 사용 중이면 자동으로 5001 포트를 사용합니다.

**정상이면:**
```json
{
  "status": "healthy",
  "timestamp": "2025-01-XX..."
}
```

### 프론트엔드 확인
- 메인 화면이 보이면 성공!
- 로그인 화면이 먼저 나올 수 있습니다

---

## 🎯 기능 테스트 순서

### 1. 로그인
- 성명과 전화번호 입력 (임의로 입력 가능)
- 로그인 버튼 클릭

### 2. 약봉지 인식 테스트
1. 메인 화면에서 **"검색"** 버튼 클릭
2. 약봉지 사진 촬영 (또는 테스트용 이미지 사용)
3. 이미지 분석 및 약 정보 추출 확인

### 3. 챗봇 테스트
1. 메인 화면에서 **"챗봇"** 버튼 클릭
2. 메시지 입력 (예: "안녕하세요", "약 먹는 시간 알려줘")
3. GPT 응답 확인

### 4. 오늘의 약 테스트
1. 메인 화면에서 **"오늘의 약"** 버튼 클릭
2. 아침/점심/저녁 시간대별 약 확인
3. 노인 친화적 설명 및 음성 안내 확인

---

## ⚠️ 문제 해결

### 백엔드 서버가 시작되지 않을 때

**오류: "ModuleNotFoundError: No module named 'flask'"**
```bash
# 가상환경이 활성화되었는지 확인
# (venv) 표시가 앞에 있어야 함
pip install -r requirements.txt
```

**오류: "Address already in use"**
- 포트 5001이 이미 사용 중
- 다른 프로그램을 종료하거나 포트 변경
- 현재 기본 포트는 5001입니다

### `/api/health` 엔드포인트가 "Not Found" 오류를 반환할 때

**문제:** 코드를 수정했는데도 여전히 이전 코드가 실행되는 경우

**해결 방법:**
1. 현재 실행 중인 백엔드 서버를 **완전히 중지**하세요
   - 서버가 실행 중인 터미널에서 `Ctrl+C`를 누르세요
   - 여러 번 눌러서 완전히 종료되도록 하세요

2. 서버를 다시 시작하세요:
```bash
cd backend
venv\Scripts\activate
python app.py
```

3. 브라우저에서 다시 테스트:
   - `http://localhost:5001/api/health`
   - 또는 `http://localhost:5001/` (루트 경로)

### 프론트엔드가 열리지 않을 때

**오류: "Address already in use"**
- 포트 8080이 이미 사용 중
- 다른 포트 사용: `python -m http.server 8081`

### API 호출 오류

**브라우저 콘솔에서 CORS 오류가 보일 때:**
- 백엔드 서버가 실행 중인지 확인
- `http://localhost:5001/api/health` 접속 테스트

**"서버에 연결할 수 없습니다" 오류:**
- 백엔드 서버가 실행 중인지 확인
- 터미널 1에서 서버가 정상 실행 중인지 확인

---

## 📝 빠른 시작 (한 줄 요약)

**터미널 1:**
```bash
cd backend && venv\Scripts\activate && python app.py
```

**터미널 2:**
```bash
cd C:\Users\ADMIN\Desktop\sibal && python -m http.server 8080
```

**브라우저:**
```
http://localhost:8080
```

---

## 🎉 성공!

모든 것이 정상 작동하면:
- ✅ 백엔드 서버: `http://localhost:5001` 실행 중
- ✅ 프론트엔드: `http://localhost:8080` 실행 중
- ✅ 브라우저에서 앱 사용 가능!

